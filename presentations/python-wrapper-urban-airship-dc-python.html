<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Using Urban Airship for Mobile Push Notifications Through the Python Wrapper</title>

  <meta name="author" content="Matthew Makai" />

  <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />

  <link href="/css/impress-style.css" rel="stylesheet" />
  <link href="/css/impress/urban-airship.css" rel="stylesheet" />
</head>
<body>
  <div id="impress" class="impress-not-supported">

    <div class="fallback-message">
      <p>Your browser <b>doesn't support the features required</b> 
      by impress.js, so you are presented with a simplified version 
      of this presentation.</p>
      <p>For the best experience please use the latest <b>Chrome</b> 
      or <b>Safari</b> browser. Firefox 10 and Internet Explorer 10 
      <i>should</i> also handle it.</p>
  </div>

  <div class="step slide my-title" data-x="-8300" data-y="0" style="text-align: center;">
    <q>Sending Push Notifications With Urban Airship's Python Wrapper</q>
    <br/>
    <div class="presentation-author">
      by <strong>Matthew Makai</strong>
      <div class="top-space">Presented to DC Python</div>
      <div class="top-space">Excella Consulting</div>
      <div class="top-space">April 3, 2012</div>
    </div>
  </div>

  <div class="step slide" data-x="-7000" data-y="0">
    <div class="slide-title slide-center">Why?</div>
  </div>
  <div class="step slide" data-x="-7000" data-y="1000">
    <div class="slide-title">
      Exponential mobile growth
    </div>
    <div class="center-image margin-top-20">
      <img src="/img/presentations/python-api-urban-airship/attdatagrowth.jpg" />
    </div>
  </div>

  <div class="step slide" data-x="-7000" data-y="2000">
    <div class="slide-title">
      Phones engage people in ways desktops cannot
    </div>
    <div class="center-image margin-top-60">
      <img src="/img/presentations/python-api-urban-airship/phone-in-hand.jpg" height="60%"/>
    </div>
  </div>
  
  <div class="step slide" data-x="-7000" data-y="3000">
    <div class="slide-title">
      New engagement type: push notifications
      <div class="center-image margin-top-80">
        <img src="/img/presentations/python-api-urban-airship/push-notification-counter.jpg" />
      </div>
    </div>
  </div>
  
  <div id="overview" class="step" data-x="1000" data-y="0" data-scale="11"></div>

  <div class="step" data-x="-1000" data-y="-3000" data-scale="8">
     <h1 class="title">Push Notifications</h1> 
  </div>

  <div class="step" data-x="1200" data-y="-3500" data-scale="1">
    <img src="/img/presentations/python-api-urban-airship/push-notifications-iphone-ios4.jpg" height="300" width="200"/>
    iOS 4
    <img src="/img/presentations/python-api-urban-airship/push-notifications-ios-5.jpg" height="300" width="300" style="margin-left: 50px;"/>
    iOS 5
  </div>

  <div class="step" data-x="1200" data-y="-3000">
    <img src="/img/presentations/python-api-urban-airship/push-notifications-android.png" height="300" width="400" />
    Android
  </div>
  
  <div class="step" data-x="-2800" data-y="-4100" data-scale="3">
    What are push notifications good for?
  </div>

  <div class="step" data-x="-3450" data-y="-3750">
    <p>Games</p>
    <p>
      <img src="/img/presentations/python-api-urban-airship/fieldrunners.png" />  
    </p>
  </div>


  <div class="step" data-x="-2700" data-y="-3750">
    <p>
      Time-sensitive Discounts
    </p>
    <p style="margin-top: 45px;">
      <img src="/img/presentations/python-api-urban-airship/living-social.png" height="40%" width="50%" class="rotate-image"/>  
    </p>
  </div>

  <div class="step" data-x="-1700" data-y="-3700">
    <p>
      Politics
    </p>
    <img src="/img/presentations/python-api-urban-airship/dnc-ipad-iphone.png" />  
  </div>

  <div class="step" data-x="-1700" data-y="-2200">
    <p>
      After figuring out <strong>appropriate</strong> use cases for push
      notifications, how do we build the infrastructure to send them?
    </p>
  </div>
  <!-- end section on push notifications -->

  <div class="step" data-x="1200" data-y="-1100" data-scale="8">
     <h1 class="title">Urban Airship</h1> 
  </div>
 
  <div class="step" data-x="0" data-y="-400" data-scale="2">
    What's an "Urban Airship"?
  </div>

  <div class="step ua-step" data-x="-1200" data-y="150" data-scale="1">
    <div class="ua-video">
      What is Urban Airship?
      <div class="ua-video-break">
        <div class="ua-youtube-video">
          <iframe width="560" height="315" src="http://www.youtube.com/embed/SBZErQQYX_w" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="ua-video-placeholder">
          <img src="/img/presentations/python-api-urban-airship/ua-video.png"/>
        </div>
      </div>
    </div>
  </div>
  
  <div class="step" data-x="-2700" data-y="-200">
    Apple Push Notification Service
  </div>

  <div class="step" data-x="-1800" data-y="-200">
    Android C2DM
  </div>

  <div class="step" data-x="-2700" data-y="200">
    BlackBerry Push Service
  </div>

  <div class="step" data-x="-1800" data-y="200">
    Windows Mobile
  </div>

  <div class="step" data-x="2800" data-y="-1450" data-scale="2">
    Urban Airship's RESTful API
  </div>

  <div class="step" data-x="2500" data-y="-1250" data-scale="1">
    <pre class="code smaller">
https://go.urbanairship.com/api/[action]
    </pre>
  </div>
  
  <div class="step" data-x="2500" data-y="-750" data-scale="1">
    <pre class="code smaller">
POST https://go.urbanairship.com/api/push/

GET https://go.urbanairship.com/api/ \
  device_tokens/[tokens]/

POST https://go.urbanairship.com/api/push/batch/
    </pre>
  </div>
  
  <div class="step" data-x="4000" data-y="-1250" data-scale="1">
    Register a Device
    <pre class="code smaller">
PUT https://go.urbanairship.com/api/ \
  device_tokens/FE66489F304DC75B8D6E8200DFF \
  8A456E8DAEACEC428B427E9518741C92C6660
    </pre>
  </div>

  <div class="step" data-x="5500" data-y="-1250" data-scale="1">
    Send a Push Notification
    <pre class="code smaller">
POST https://go.urbanairship.com/api/push/

{
  "device_tokens": [
    "ABC...",
    "FEG..."
  ],
  "schedule_for": [
    "2012-07-27 22:48:00",
    "2012-07-28 22:48:00"
  ],
  "aps": {
    "alert": "Hello from Urban Airship!"
  }
}
    </pre>
  </div>


  <!-- end Urban Airship section --> 
  
  <div class="step" data-x="3500" data-y="1000" data-scale="8">
     <h1 class="title">Python</h1> 
  </div>

  
  <div class="step" data-x="3400" data-y="400" data-scale="2">
    Example push code
  </div>

  <div class="step" data-x="3000" data-y="800">
    <pre class="code smaller">
import urbanairship

app_key = 
  UA_KEYS[group_name]['UA_APPLICATION_KEY']

master_key = 
  UA_KEYS[group_name]['UA_MASTER_SECRET_KEY']

airship = urbanairship.Airship(app_key, 
  master_key)
    </pre>
  </div>

  <div class="step" data-x="3000" data-y="1300">
    <pre class="code smaller">
android_json = {'android': {'alert': 
  'Android push notification text.'}}

airship.broadcast(android_json)

ios_json = {'aps': {'alert':
  'iOS push notification text.'}}

airship.broadcast(ios_json)
    </pre>
  </div>

  <div class="step" data-x="4200" data-y="1300">
    <pre class="code smaller">
android_json2 = {'android': {'alert': 
  'Android push notification text.',
  'extra': {'url': 'http://example.com/content'}
  }}

airship.broadcast(android_json2)
    </pre>
  </div>

  <div class="step" data-x="5900" data-y="350" data-scale="2">
    urbanairship.py
  </div>

  <div class="step" data-x="5400" data-y="800">
    <pre class="code smaller">
BASE_URL = 'https://go.urbanairship/api'
BROADCAST_URL = BASE_URL + '/push/broadcast/'

def broadcast(self, payload, 
  exclude_tokens=None):

  if exclude_tokens:
    payload['exclude_tokens'] = exclude_tokens

  body = json.dumps(payload)
  status, response = self._request('POST',
    body, BROADCAST_URL, 'application/json')

  if not status == 200:
    raise AirshipFailure(status, response)
    </pre>
  </div>
  <!-- end Python code section --> 
  
  <div id="overview2" class="step view-all" data-x="1000" data-y="0" data-scale="10">
  </div>
  
  <div class="step" data-x="4400" data-y="2800" data-scale="8">
     <h1 class="title">Where to go from here</h1> 
  </div>

  <div class="step" data-x="3100" data-y="3400">
    <a href="https://github.com/urbanairship/python-library">Official Urban Airship Python API wrapper</a>
  </div>

  <div class="step" data-x="3100" data-y="3700">
    <a href="https://github.com/makaimc/python-library">Python wrapper fork w/ Android support</a>
  </div>

  <div class="step" data-x="4200" data-y="3400">
    <a href="http://blog.cloudmine.me/post/18606860980/geofencing">Geofencing w/ Urban Airship &amp; CloudMine</a>
  </div>

  <div class="step" data-x="4200" data-y="3700">
    <a href="http://mmakai.com/post/11652158898/urban-airship-push-notifications-on-android-and-c2dm">Push Notification Tokens with Android C2DM</a>
  </div>
 
  <div class="step" data-x="5300" data-y="3400">
    <a href="http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12">Apple Push Notifications Tutorial</a>
  </div>

  <div class="step" data-x="5300" data-y="3700">
    <a href="https://github.com/makaimc/matt-makai-static-blog/blob/master/static-html/presentations/python-wrapper-urban-airship.html">Source Code to this Presentation</a>
  </div>

  <div id="references" class="step slide" data-x="9000" data-y="9000">
    <div class="slide-title">References</div>
    <ul class="reference-bullets">
      <li>
        AT&amp;T network traffic growth: 
        http://cparente.files.wordpress.com/2012/02/attdatagrowth.jpg
      </li>
      <li>
        Mobile phone in hand:
        http://cdn.contentlead.com/wp-content/uploads/2011/12/iPhone-4-in-Hand-e1322839760319.jpg
      </li>
      <li>
        Push notifications counter:
        http://www.viberfaq.com/wp-content/uploads/2011/01/apple-push-notification-service.jpg
      </li>
      <li>
        iOS 4 push notification:
        http://www.iphoneheat.com/wp-content/uploads/2009/05/push-notifications-iphone-os-30-08.jpg
      </li>
      <li>
        iOS 5 push notifications:
        http://www.howfreetips.com/wp-content/uploads/2011/12/push-notifications-ios5-arrange.jpg
      </li>
      <li>
        Android push notifications:
        http://urbanairship.com/wp-content/uploads/2011/03/Embedded-Android-Push1.png
      </li>
      <li>
        Fieldrunners:
        http://fieldrunners.com/media/
      </li>
      <li>
        Horizontal iPhone:
        http://nozbe.net/imgblog/iphone-horizontal.jpeg
      </li>
      <li>
        Horizontal Droid:
        http://cdn.androidcentral.com/sites/androidcentral.com/files/articleimage/9274/2010/09/Droid-horizontal.jpg
      </li>
      <li>
        LivingSocial mobile app:
        http://a0.ak.lscdn.net/deals/images/iphone_promo/210/screen_2b.jpg
      </li>
    </ul>
  </div>

  <script src="/js/impress.js"></script>
  <script>impress().init();</script>
</body>
</html>
